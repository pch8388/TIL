# 인터넷 프로토콜
## 인터넷 프로토콜 스택의 4계층(TCP/IP 모델)
1. 애플리케이션 계층 - HTTP, FTP
2. 전송 계층 - TCP, UDP
3. 인터넷 계층 - IP
4. 네트워크 인터페이스 계층 - 이더넷 랜카드

### 프로토콜 계층에 따른 데이터 생성 흐름
1. 프로그램이 메시지 생성(브라우저, 게임, 채팅프로그램 등등)
2. SOCKET 라이브러리를 통해 OS 의 system call 을 호출
3. TCP 정보 생성 - 헤더를 생성하여 메시지 데이터에 추가
4. IP 패킷 생성 - 헤더를 생성하여 TCP 정보에 추가

## IP
- 지정한 IP 주소에 데이터 전달
- 패킷이라는 통신 단위로 데이터 전달
- TCP/IP 모델의 인터넷 계층으로 데이터 전송시 전송계층(TCP, UDP) 내려온 데이터에 IP 헤더를 붙이거나, 전송받은 데이터의 IP 헤더를 해석한다.
- 출발지 IP, 목적지 IP 등의 정보를 헤더에 추가

### IP 프로토콜의 한계
- 비연결성 : 패킷을 받을 대상이 받을 수 있는 상태인지 판별할 수 없음
- 비신뢰성 : 패킷 손실이나, 순서를 보장하지 않음
- PORT 구분을 하지 못함

## TCP
- 전송제어 프로토콜(Transmission Control Protocol)
- 출발지 port, 목적지 port, 전송제어, 순서, 검증정보 등의 정보를 헤더에 추가
- 세그먼트라는 단위로 데이터 전달
- 연결지향 - TCP 3 way handshake
  - 논리적인 연결이며, 물리적으로 연결되어 있지는 않음
- 신뢰성 : 데이터 전달 보증, 순서보장
  - 패킷이 유실되거나 순서대로 오지 않으면, 잘못된 부분부터 다시 보내도록 요청한다
  - 데이터를 보내면 잘받았다는 응답을 보냄
- 현재 인터넷에서 가장 많이 사용

### TCP 3 way handshake
1. 클라이언트 -> 서버 로 SYN
2. 서버 -> 클라이언트 로 SYN + ACK
3. 클라이언트 -> 서버 로 ACK (요청 수락을 보내며 데이터를 같이 전송하기도 함)
- SYN : 접속 요청
- ACK : 요청 수락

## UDP
- 사용자 데이터그램 프로토콜(User Datagram Protocol)
- 하얀 도화지에 비유 (기능이 없음)
- 비연결 지향, 데이터 전달 보증하지 않음, 순서 보장하지 않음
- 단순하고 빠름
- IP와 거의 같지만 PORT, 체크섬이 추가되어 있음
- 애플리케이션에서 추가적인 작업이 필요
- TCP 로 이미 구현된 것들이 너무 많아 새로운 시도를 하려면 UDP 를 사용해야 함 => 최근 HTTP/3 에서는 UDP 를 이용하려는 시도가 있음

[출처](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard)