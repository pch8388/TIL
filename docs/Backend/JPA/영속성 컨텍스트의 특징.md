# 영속성 컨텍스트의 특징

- 영속성 컨텍스트의 식별자 값
    1. 영속 상태는 식별자 값이 반드시 있어야 함(@ID로 테이블의 기본키와 매핑한 값)
    2. 식별자 값이 없으면 예외가 발생
- 영속성 컨텍스트와 데이터베이스 저장
    1. 트랜잭션을 커밋하면 영속성 컨텍스트에 새로 저장된 엔티티를 데이터 베이스에 반영(flush)
- 영속성 컨텍스트가 엔티티를 관리하면 생기는 장점
    1. 1차캐시
    2. 동일성 보장
    3. 트랜잭션을 지원하는 쓰기 지원
    4. 변경 감지
    5. 지연 로딩
- 1차캐시 : 영속성 컨텍스트에 map 형태로 캐시함 → persist로 저장하면 1차 캐시에 캐싱함 → find로 검색할 때, 1차캐시부터 확인 후 없으면 DB에서 데이터를 가져와 1차 캐시에 캐싱하고, 데이터를 반환
- 영속 엔티티의 동일성을 보장 → 1차캐시에 있는 엔티티의 인스턴스를 반환하기 때문에 인스턴스 동일성(identity) 보장

```java
Member a = em.find(Member.class, "member1");
Member b = em.find(Member.class, "member1");
// a == b    → true
```