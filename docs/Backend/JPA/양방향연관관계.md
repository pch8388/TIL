# 양방향 연관관계
- 양방향 연관관계는 편의상 붙이는 이름이고 사실은 단방향 연관관계 2개
- 관계형 데이터베이스는 관계에 대한 방향성이 없음
  - join 같은 집합연산으로 조회를 함
- 객체는 항상 방향성이 있어야 하기 때문에 단방향 연관관계 2개로 양쪽 모두에서 접근하도록 해줌

## 연관관계의 주인
- 양방향 연관관계는 연관관계의 주인을 지정해야 함
- 둘 중 어느 객체가 fk 값이 변했을때 데이터베이스의 값을 update 할 지 결정해야 하기 때문
- 연관관계의 주인은 비즈니스 적으로 더 중요한 객체가 아닌 fk 를 가져야 하는 객체로 하는 것이 좋음
  - 실제로 update 의 대상이기 때문에
- 연관관계의 주인이 아닌 클래스는 주인인 클래서의 필드를 mappedBy 로 지정해야 함

```java
@Entity
public class Member {
  @Id @GeneratedValue
  private Long id;
  
  @ManytoOne
  @JoinColumn(name = "team_id")   // team_id 를 fk 로 갖는다
  private Team team;
}

@Entity
public class Team {
  @Id @GeneratedValue
  private Long id;
  
  // team 1 : member n 이기 때문에 n 쪽에 fk 가 생기고, 연관관계의 주인의 필드인 team 에 mapping 한다
  @OneToMany(mappedBy = "team")
  private List<Member> members = new ArrayList<>();
}
```
