# 1주차 피드백
- LineService 에서 Station 조회를 위해 참조하는 객체를 StationService vs StationRepository
    - service 사용시 : 유효성 검증 등에 중복이 발생하는 것을 방지할 수 있지만, 서비스간의 상호참조 등이 발생할 수 있다 → 상호참조가 발생하는 문제는 설계의 문제가 아닌지 고민해봐야 한다
    - repository 사용시 : 상호참조에 대한 문제를 배재할 수 있지만, 도메인간의 상호참조의 문제가 생긴 것을 미리 알아차릴 수 없다.
    - service 를 사용하는 것이 더 좋은거 같다
- 다른 클래스에서 사용이 필요한 메소드만 step class 로 따로 빼서 사용
- 브라운은 service 로 dto 를 넘겨서 entity 로 변환하는걸 선호한다 ⇒ dto 가 항상 entity 로 변환할수 있는 상황은 아닐 수 있기 때문
- 인수테스트는 사전 조건을 정의하기가 굉장히 힘듬
    - 블랙박스 테스트를 구축할 수 있는 환경을 점진적으로 만드는 것을 목표로 해야한다
- MapStruct 와 같은 라이브러리를 쓰는 것도 좋음. 다만, 엔티티가 비대해지는 것에 대한 경계를 늦추지 않아야 한다

## 인수 테스트 클래스
Feature 기준으로 인수 테스트 클래스를 나눌수 있다

- 필요한 테스트 픽스처가 다를 경우 인수 테스트 클래스를 나누는 것이 좋다

# 2주차
## 테스트 비용
- 모든 것을 인수 테스트를 통해 검증하려면 비용과 시간이 증가
- 반드시 충족해야 할 시나리오에 대해 인수 테스트로 구현
- 예외 검증이나 사이드 케이스 등 업무 규칙에 대해서는 단위 테스트로 검증

## 단위 테스트
- given, when, then 을 단위 테스트에서도 쓰는 것이 좋다
- 협력객체 : 테스트 할 대상과 상호작용하는 객체

## 단위 테스트 종류
통합과 고립(Sociable and Solitary)

협력 객체가 진짜 객체인지 가짜 객체인지

- 통합유닛테스트 : 협력 객체를 실제 객체로 사용
- 고립유닛테스트 : 협력 객체를 가짜 객체로 사용

## Test Double
- 테스트 목적으로 실제 객체 대신 사용되는 객체에 대한 일반 용어
- 테스트 더블 사용 시 테스트가 세부구현에 의존성이 생길 수 밖에 없음 ⇒ 가짜 객체의 세부 구현을 테스트에서 정의해야 하기 때문

### Stubbing
- 테스트 동안 호출이 되면 미리 지정된 답변으로 응답
- 미리 프로그램 된 것 외에는 응답하지 않음

### Mocking
mock 은 사실 stub 이랑 다름

mocking : 테스트 더블 전체를 의미하는 용어로도 사용됨, method가 호출 됐는지 검증 등(verify 같은건가?) ⇒ 행위검증

### 테스트 대상이 협력 객체를 가질 때
- 실제 객체를 사용 하면 협력객체의 행위를 실제 객체가 스스로 정의 ⇒ 테스트가 상세 구현을 몰라도 됨
    - 단점 : 테스트가 협력 객체의 상태에 의존하게 됨
- 가짜 객체를 사용하면 협력 객체의 행위를 테스트가 정의 ⇒ 협력 객체의 상세구현을 테스트가 알아야 한다
    - 장점 : 협력 객체라는 외부 요인으로부터 테스트 격리가 철저하게 일어남

> 실제 객체를 사용해서 TDD 하는 것을 추천하지만 TDD 흐름이 깨진다면 가짜 객체를 사용하는 것도 좋음

## 통합 테스트
독립된 단위가 서로 연결될 때 올바르게 작동하는 지 확인하는 테스트

### 넓은 의미 vs 좁은 의미
- 넓은 의미 : 여러 모듈로 구성된 시스템이 예상대로 작동하는지 테스트
- 좁은 의미 : 별도로 개발 된 모듈이 제대로 작동하는지 테스트

## TDD with 인수테스트
### Outside In
- 바깥영역부터 시작(ex.User Interface)
- 테스트 대상 지정 후 협력 객체를 (껍데기만) 만들고 Mock 객체로 대체하여 테스트 수행
- 도메인에 대한 이해가 없어도 TDD 가능

### Inside out
- 안쪽 영역부터 시작(ex.Entity)
- 도메인 로직이 UI 에 의존하지 않도록 함
- Mock 객체를 사용할 필요가 없어짐 ⇒ 무조건은 아니고 사용빈도가 낮아짐

### Service test
꼭 필요하지 않은 경우 만들지 않기도 함 ⇒ 도메인 객체는 반드시 테스트하고, 서비스 객체는 반드시 해야하는지는 고민해보아야 함

> 질문 : 하나의 객체 (예를 들어 서비스)에서 의존하는 객체가 어느정도까지가 적정선이라고 생각하는지

# 질문 - step1
- Section 정보를 외부로 노출할 필요가 없다고 생각하여, Line 엔티티에서 getSection 과 같은 메서드를 안만들었는데, addSection 을 하면, 구간의 길이 등에 대해서도 테스트를 해야하는데, 이런 경우 어떤형태로 하는지.. 아니면 Sections 가 드러나도 상관이 없을지

[2주차 미션완료](https://github.com/next-step/atdd-subway-path/tree/pch8388)