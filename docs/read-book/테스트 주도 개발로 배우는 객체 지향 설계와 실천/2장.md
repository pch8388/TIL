# 2장 객체를 활용한 테스트 주도 개발
## 객체망
- 객체 지향 설계는 객체 자체보다 객체 간의 `메시지 전달`이 중요
- 객체 지향 시스템은 협업하는 객체의 망으로 구성
- 시스템에 포함된 객체의 구성을 변경해서 유연하게 시스템 작동 방식 변경
  - 객체망의 행위에 대한 선언적(declarative) 정의
  - 방법(how)이 아닌 목적(what)에 집중 가능

## 값과 객체
- value : `값 자체`를 나타냄 (변화할 수 없음, 이미 하나의 완전한 값으로서의 의미)
- object : `식별자(identify)`를 가지고 시간이 지남에 따라 상태등이 변할 수 있음
- 객체 지향 언어에서는 둘을 따로 구분하지 않는 경우가 있음(특히 자바)
  - 따라서 구현시 value 는 불변하게 구성하여 값으로서의 역할을 수행하도록 한다

## 역할, 책임 협력자
- 역할 : 관련된 책임의 집합
- 책임 : 어떤 과업을 수행하거나 정보를 알아야할 의무
- 협력 : 객체나 역할의 상호작용
- CRC 카드로 설계를 적용하면 해법에만 몰두하지 않고 구조를 실험해 볼 수 있다

## 묻지 말고 답하라
- 디미터 법칙
- 객체는 내부적으로 보유했거나 메시지를 통해 얻은 정보만으로 의사결정을 내려야 함
  - 다른 객체를 탐색해 뭔가를 일어나게 해서는 안됨
- 법칙을 따르면 같은 역할의 객체로 교체하기 쉽기 때문에 유연성이 상승
- 객체 그래프 탐색으로 길어지는 체이닝 문제를 없앨 수 있다(열차 전복 코드)

## 그래도 가끔은 물어라
- 스스로 답을 가늠하는데 필요한 정보가 아닌 진정으로 답하고자 하는 질문을 던저야 함
- 질의를 해도 객체 바깥으로 정보가 세어나가는 것에 대해 주의를 해야한다
- 객체의 의도를 서술하는 질의를 작성하도록 애써야 함

## 협력 객체의 단위테스트
### 방법
- 예상 구문(expectation) : mock 객체를 이용하여 사용하는 객체에 대해 어떠한 행동을 할 것인지 지정
- mock 객체는 자신이 예상대로 호출되었는지 단정
- 나머지 테스트가 동작하는 데 필요한 행위(스텁형태로 동작)를 구현

### 인터페이스 발견(interface discovery)
- 테스트를 이용하면 객체에 필요한 보조 역할을 파악하는 데 도움이 된다(의존성에 대한 이야기 인듯)
- 이러한 보조 역할은 자바 인터페이스로 정의돼 있고 실제 구현체처럼 동작시킨다(mocking)
- 이러한 것을 인터페이스 발견이라 한다

## 목 객체를 활용한 TDD 지원
- 테스트 핵심구조
  - 필요한 목 객체 생성
  - 대상 객체를 포함한 실제 객체 생성
  - 대상 객체에서 목 객체가 어떻게 호출될지 예상하는 바를 기술
  - 대상 객체에서 유발(trigger) 메서드(하나 또는 여러 개) 호출
  - 결과 값이 유효하고 예상되는 메서드 호출이 모두 일어났는지 확인 